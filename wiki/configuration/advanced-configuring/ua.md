# –†–æ–∑—à–∏—Ä–µ–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–ü—Ä–æ—Å—Ç—ñ –∑–Ω–∞—á–µ–Ω–Ω—è ‚Äî —Ü–µ –¥–æ–±—Ä–µ, –∞–ª–µ –∫–æ–ª–∏ —ó—Ö –±–∞–≥–∞—Ç–æ, –≤–æ–Ω–∏ —Å—Ç–∞—é—Ç—å –≤–∞–∂–∫–∏–º–∏ –¥–ª—è –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó. –£ —Ü—å–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ, —è–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä—É–≤–∞—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–±—Ä–æ–±–Ω–∏–∫–∏ (processors), —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—ñ–¥ –Ω–µ—ó –º–∞–∫—Å–∏–º—É–º –∫–æ—Ä–∏—Å—Ç—ñ.

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–µ–∫—Ü—ñ–π

–§–∞–π–ª –∑ –¥–µ—Å—è—Ç–∫–∞–º–∏ –∑–Ω–∞—á–µ–Ω—å —à–≤–∏–¥–∫–æ —Å—Ç–∞—î –≤–∞–∂–∫–∏–º –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è. –ù–∞ —â–∞—Å—Ç—è, –∑ Quilt Config –º–∏ –º–æ–∂–µ–º–æ –æ—Ä–≥–∞–Ω—ñ–∑—É–≤–∞—Ç–∏ –π–æ–≥–æ –Ω–∞ —Å–µ–∫—Ü—ñ—ó! –¶–µ –¥—É–∂–µ –ø—Ä–æ—Å—Ç–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏.

–°–µ–∫—Ü—ñ—ó –¥–æ–∑–≤–æ–ª—è—é—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤—ñ–¥—Å—Ç—É–ø–∏ –¥–ª—è –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è —á–∞—Å—Ç–∏–Ω –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó. –î–∞–≤–∞–π—Ç–µ –¥–æ–¥–∞–º–æ –ø—Ä–∏–∫–ª–∞–¥ —Å–µ–∫—Ü—ñ—ó, —è–∫–∞ —É —Ñ–æ—Ä–º–∞—Ç—ñ TOML –≤–∏–≥–ª—è–¥–∞—î —Ç–∞–∫:

```toml
# ...

# –¶–µ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –º–æ–¥–æ–º, –ø—Ä–æ—Å—Ç–æ —ñ–¥–µ–π –±—ñ–ª—å—à–µ –Ω–µ –±—É–ª–æ.
typesOfSoup = ["tomato", "borscht", "chicken noodle", "ramen", "STEW", "mushroom"]

# –†–æ–∑—à–∏—Ä–µ–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –¥–æ—Å–≤—ñ–¥—á–µ–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.
[advanced_settings]
    # –ß–∏ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤–∏–π —Ä—è–¥–æ–∫ –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
    # default: true
    printNewlines = true
```

–©–æ–± –∑—Ä–æ–±–∏—Ç–∏ —Ü–µ –≤ –∫–æ–¥—ñ:

`src/main/com/example/example_mod/ExampleModConfig`:

```java
public class ExampleModConfig extends ReflectiveConfig {
    // ...
    @Comment("–†–æ–∑—à–∏—Ä–µ–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –¥–æ—Å–≤—ñ–¥—á–µ–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.")
    @SerializedName("advanced_settings")
    public final AdvancedSettings advancedSettings = new AdvancedSettings();

    public static class AdvancedSettings extends Section {
        @Comment("–ß–∏ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤–∏–π —Ä—è–¥–æ–∫ –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.")
        @SerializedName("print_newlines")
        public final TrackedValue<Boolean> printNewlines = this.value(true);
    }
}
```

–ú–∏ –ø—Ä–æ—Å—Ç–æ —Å—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π –∫–ª–∞—Å —É—Å–µ—Ä–µ–¥–∏–Ω—ñ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–æ–≥–æ –∫–ª–∞—Å—É, —è–∫–∏–π –Ω–∞—Å–ª—ñ–¥—É—î `ReflectiveConfig.Section`. –ü–æ—Ç—ñ–º —Å—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç —Ü—å–æ–≥–æ –∫–ª–∞—Å—É –≤ –≥–æ–ª–æ–≤–Ω–æ–º—É –∫–æ–Ω—Ñ—ñ–≥-—Ñ–∞–π–ª—ñ. –ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É: –µ–∫–∑–µ–º–ø–ª—è—Ä —Å–µ–∫—Ü—ñ—ó **–Ω–µ** –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —É `TrackedValue`, –Ω–∞—Ç–æ–º—ñ—Å—Ç—å –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Å–µ–∫—Ü—ñ—ó –≤–∂–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è `TrackedValue`.

–¢–µ–ø–µ—Ä –º–∏ –º–æ–∂–µ–º–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –±—É–¥—å-—è–∫—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–Ω–∞—á–µ–Ω—å –≤ —Å–µ–∫—Ü—ñ—é. –ê–ª–µ —â–æ, —è–∫—â–æ –º–∏ —Ö–æ—á–µ–º–æ –∑–±–µ—Ä–µ–≥—Ç–∏ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–∏–ø, –∞ –æ–±'—î–∫—Ç? –î–ª—è —Ü—å–æ–≥–æ –Ω–∞–º –∑–Ω–∞–¥–æ–±–∏—Ç—å—Å—è —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤–ª–∞—Å–Ω–∏—Ö —Ç–∏–ø—ñ–≤.

## –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤–ª–∞—Å–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å

–í Java –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–≤–æ–¥–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É —Ä—ñ–∑–Ω—ñ –ø–æ—Ç–æ–∫–∏ –≤–∏–≤–æ–¥—É. –í–æ–Ω–∏ –Ω–µ —î —Å–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, —è–∫ `int` —á–∏ `String`. –¢—É—Ç —ñ —Å—Ç–∞—î –≤ –Ω–∞–≥–æ–¥—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ConfigSerializableObject<T>`.

–í—ñ–Ω –ø—Ä–∞—Ü—é—î —á–µ—Ä–µ–∑ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏: `<T>` ‚Äî —Ü–µ —Ç–∏–ø, –≤ —è–∫–∏–π –≤–∞—à –æ–±‚Äô—î–∫—Ç –±—É–¥–µ —Å–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —É —Ñ–∞–π–ª—ñ, –∞ –ø–æ—Ç—ñ–º –±—É–¥–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞–∑–∞–¥. –©–æ–± —Ü–µ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏, –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ —Ç—Ä–∏ –º–µ—Ç–æ–¥–∏:

- `T getRepresentation()`: –ø–æ–≤–µ—Ä—Ç–∞—î —Å–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç –≤–∞—à–æ–≥–æ –æ–±'—î–∫—Ç–∞.
- `YourSerializableClass convertFrom(T)`: –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î —Å–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç –Ω–∞–∑–∞–¥ —É –≤–∞—à –∫–ª–∞—Å.
- `YourSerializableClass copy()`: —Å—Ç–≤–æ—Ä—é—î –∫–æ–ø—ñ—é –æ–±'—î–∫—Ç–∞ (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ Quilt Config).

### –ü—Ä–∏–∫–ª–∞–¥ –∑ Enum:

```java
public static class AdvancedSettings extends Section {
    @Comment("–î–æ —è–∫–æ–≥–æ –ø–æ—Ç–æ–∫—É –≤–∏–≤–æ–¥–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.")
    @SerializedName("print_stream")
    public final TrackedValue<PrintStreamOption> printStream = this.value(PrintStreamOption.SYSTEM_OUT);

    public enum PrintStreamOption implements ConfigSerializableObject<String> {
        SYSTEM_OUT(System.out),
        SYSTEM_ERROR(System.err);

        private final PrintStream printStream;

        PrintStreamOption(PrintStream stream) {
            this.printStream = stream;
        }

        public PrintStream getStream() {
            return this.printStream;
        }

        @Override
        public PrintStreamOption convertFrom(String representation) {
            return valueOf(representation);
        }

        @Override
        public String getRepresentation() {
            return this.name();
        }

        @Override
        public PrintStreamOption copy() {
            return this;
        }
    }
}
```

Enum –¥–æ–∑–≤–æ–ª—è—î –Ω–∞–º –∑–∞–¥–∞—Ç–∏ –æ–±–º–µ–∂–µ–Ω–∏–π –Ω–∞–±—ñ—Ä –∑–Ω–∞—á–µ–Ω—å, –∞ —Ç–∞–∫–æ–∂ Quilt Config —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ –∑–≥–µ–Ω–µ—Ä—É—î –∫–æ–º–µ–Ω—Ç–∞—Ä –∑ –º–æ–∂–ª–∏–≤–∏–º–∏ –≤–∞—Ä—ñ–∞–Ω—Ç–∞–º–∏.

### –ü—Ä–∏–∫–ª–∞–¥ –∑ –æ–±‚Äô—î–∫—Ç–æ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:

```java
public class Vec3i implements ConfigSerializableObject<ValueMap<Integer>> {
    public final int x, y, z;

    public Vec3i(int x, int y, int z) {
        this.x = x; this.y = y; this.z = z;
    }

    @Override
    public Vec3i copy() {
        return this;
    }

    @Override
    public Vec3i convertFrom(ValueMap<Integer> representation) {
        return new Vec3i(representation.get("x"), representation.get("y"), representation.get("z"));
    }

    @Override
    public ValueMap<Integer> getRepresentation() {
        return ValueMap.builder(0)
                .put("x", x)
                .put("y", y)
                .put("z", z)
                .build();
    }
}
```

–¢—É—Ç –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `ValueMap`, —â–æ–± –∑—Ä—É—á–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–∏ —Å–∫–ª–∞–¥–Ω–∏–π –æ–±‚Äô—î–∫—Ç –∑ –∫—ñ–ª—å–∫–æ–º–∞ –ø–æ–ª—è–º–∏.

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–æ—Ä—ñ–≤

–ê —Ç–µ–ø–µ—Ä ‚Äî —Ç—Ä–æ—Ö–∏ –∑–ª–∞ üòà. `@Processor` –¥–æ–∑–≤–æ–ª—è—î –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó, –∞ —Ç–∞–∫–æ–∂ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∫–æ–¥ –ø—Ä–∏ –∑–º—ñ–Ω—ñ –∑–Ω–∞—á–µ–Ω—å.

```java
@Processor("processConfig")
public class ExampleModConfig extends ReflectiveConfig {
    public void processConfig(Config.Builder builder) {
        System.out.println("–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó!");
    }
}
```

–ú–µ—Ç–æ–¥ `processConfig` –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É. –ö—Ä—ñ–º —Ç–æ–≥–æ, –º–∏ –º–æ–∂–µ–º–æ –¥–æ–¥–∞—Ç–∏ –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –≤–∏–∫–ª–∏–∫ (callback), —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:

```java
builder.callback(config -> System.out.println("–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –æ–Ω–æ–≤–ª–µ–Ω–æ!"));
```

–ú–æ–∂–Ω–∞ —Ç–∞–∫–æ–∂ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–æ—Ü–µ—Å–æ—Ä–∏ –¥–ª—è –æ–∫—Ä–µ–º–∏—Ö –ø–æ–ª—ñ–≤. –ù–∞–ø—Ä–∏–∫–ª–∞–¥:

```java
@Processor("processPrintStream")
public final TrackedValue<PrintStreamOption> printStream = this.value(PrintStreamOption.SYSTEM_OUT);
public transient PrintStream activeStream = printStream.value().getStream();

public void processPrintStream(TrackedValue.Builder<PrintStreamOption> builder) {
    builder.callback(val -> activeStream = val.getStream());
}
```

–¶–µ –¥–æ–∑–≤–æ–ª—è—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—É `activeStream`, –∫–æ–ª–∏ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø–æ–ª–µ `printStream`.
